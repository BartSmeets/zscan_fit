# Z-Scan Fit

All code necessary to analyse a z-scan measurement and fit the data according to different nonlinear absorption models.

## Table of contents
* [General information](#general-information)
* [Beam profile](#beam-profile)
* [Power measurement](#power-measurement)
* [Normalise data](#normalise-data)
* [Z-Scan fit](#z-scan-fit)
* [Installation and requirements](#installation-and-requirements)

## General information

This project has been part of my thesis for the degree of [Master of Science in Nanoscience, Nanotechnology and Nanoengineering](https://www.kuleuven.be/programmes/master-nanoscience-nanotechnology-nanoengineering) at KU Leuven. Read the [thesis report](/docs/thesis.pdf) for methodology of the measurment and documentation of the code.

The code has been split into functional parts:
* [beam profile](#beam-profile)
* [power measurement](#power-measurement)
* [normalise data](#normalise-data)
* [z-scan fit](#z-scan-fit)

## Beam profile

The first step of doing a z-scan measurement is to know the properties of the beam. The program generates a ```.txt``` containting the beam properties

### How to use

1. Run ```./bin/beam_profile.exe``` (```z-scan.zip```) or ```./beam_profile/window.py``` (repository)

![screenshot](https://github.com/BartSmeets/zscan_fit/blob/main/images/beam_profile_exe.png)

2. Select the folder that contains and enter the wavelength and stepsize of the measurement in the window

3. Press 'run'

## Power measurement

Our setup used a oscilloscope to reliably visualise the beam energy.

The program reads the oscilloscope data and exports a ```.txt``` containing the signal voltage, the pulse energy and the peak power. A plot of the signal is exported as well.

### How to use

1. Run: ```./bin/power_measurement.exe``` (```z-scan.zip```) or ```./power_measurement/window.py``` (repository)

![screenshot](https://github.com/BartSmeets/zscan_fit/blob/main/images/power_measurement_exe.png)

2. Select the oscilloscope data file

3. Press 'run'

## Normalise data

To be compatible with the [final fitting code](#z-scan-fit), the data needs to be normalised first.

The program takes the data from one or more measurements and returns normalised data of the data individually, as well as, a normalised average over all measurements. A plot of the normalised data is exported as well.

By running the program, an additional file is generated that is used to provide the experiment parameters to the final fitting code. An empty example of this file can be found in: ```./docs/INPUT_PARAMETERS.csv```.

### How to use

1. Run: ```./bin/normalise_data.exe``` (```z-scan.zip```) or ```./normalise_data/window.py``` (repository)

![screenshot](https://github.com/BartSmeets/zscan_fit/blob/main/images/normalise_data_exe.png)

2. Select one or multiple data files

3. Press 'run'


## Z-Scan fit

Finally, the nonlinear absorption models can be fitted.

The program takes the normalised data and a completed input-file that has been generated by the [normalisation code](#normalise-data). If the data was readily normalised and an input-file has not been generated, the template can also be found in: ```./templates/INPUT_PARAMETERS.csv```.

By running the program, a ```.txt``` containing the fitted model parameters is exported, as well as, plots of the fitted data.

### How to use

1. Run: ```./bin/z_scan.exe``` (```z-scan.zip```) or ```./z_scan/window.py``` (repository)

![screenshot](https://github.com/BartSmeets/zscan_fit/blob/main/images/z_scan_exe.png)

2. Select the [normalised data file](#normalise-data)

3. Enter the fit type, initial conditions and model bounds

4. Press 'run'

5. Press 'export' to export the results


## Installation and requirements

[![Build with](https://img.shields.io/badge/Build%20with-Python%203.8-blue)](https://www.python.org/])

### Required packages (only when running from repository)
* numpy
* pandas
* matplotlib.pyplot
* scipy.optimize
* scipy.signal

### Installation

1. [Download](https://github.com/BartSmeets/zscan_fit/releases/latest/download/z-scan.zip) ```z-scan.zip``` containing the executable files*

2. Unzip ```zscan_fit.zip```

*Alternatively, you can [download](https://github.com/BartSmeets/zscan_fit/archive/refs/heads/main.zip) or clone the entire repository:
    
```bash
git clone https://github.com/BartSmeets/zscan_fit.git
```

in which case the installation of the dependencies is required:

```
pip install -r requirements.txt
```
